<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BOLT 1.40 — Official Installer</title>
  <link rel="icon" href="assets/boltlogo.ico" type="image/x-icon" />
  <style>
    /* ---------- design tokens ---------- */
    :root{
      --red-500: #ff4b4b;
      --auth-gray: #9aa0a6;
      --accent: #1e90ff;
      --sky: #38bdf8;
      --radius: 14px;
      --shadow-soft: 0 10px 30px rgba(10,20,30,0.06);
      --shadow-deep: 0 18px 60px rgba(2,8,20,0.35);

      /* typography */
      --fs-h1: 34px;
      --fs-sub: 16px;
      --fs-body: 15px;
      --line: 1.45;
      --gap: 20px;
    }

    /* ---------- theme: soft (default) ---------- */
    :root {
      --bg: linear-gradient(180deg,#eef6fa,#f7fbfe);
      --panel: linear-gradient(180deg,#ffffff,#f6fafc);
      --text: #072033;
      --muted: #4d6b75;
      --panel-border: rgba(10,20,30,0.04);
      --logo-shadow: rgba(30,144,255,0.08);
    }

    /* ---------- theme: light ---------- */
    html.theme-light {
      --bg: linear-gradient(180deg,#fbfcfe,#ffffff);
      --panel: linear-gradient(180deg,#ffffff,#ffffff);
      --text: #072033;
      --muted: #556b73;
      --panel-border: rgba(10,20,30,0.06);
      --logo-shadow: rgba(30,144,255,0.09);
    }

    /* ---------- theme: dark (contrast but friendly) ---------- */
    html.theme-dark {
      --bg: linear-gradient(180deg,#071226,#041726);
      --panel: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      --text: #e6f8ff;
      --muted: #9fb4c0;
      --panel-border: rgba(255,255,255,0.03);
      --logo-shadow: rgba(30,144,255,0.12);
    }

    /* ---------- base ---------- */
    * { box-sizing: border-box; }
    html,body { height:100%; margin:0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    body {
      background: var(--bg);
      color: var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:32px;
      line-height:var(--line);
      -webkit-font-smoothing:antialiased;
    }

    /* ---------- layout centered ---------- */
    .container {
      width:100%;
      max-width:980px;
      text-align:center;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:18px;
      position:relative;
    }

    /* ---------- main card ---------- */
    .card {
      width:100%;
      border-radius:var(--radius);
      background: var(--panel);
      border: 1px solid var(--panel-border);
      box-shadow: var(--shadow-soft);
      padding:36px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px;
      transition: transform .16s ease, box-shadow .16s ease;
    }
    .card:focus-within { transform: translateY(-4px); box-shadow: var(--shadow-deep); }

    /* ---------- header row: logo + title ---------- */
    .header-row {
      width:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:18px;
      flex-wrap:wrap;
    }

    .logo {
      width:116px;
      height:116px;
      border-radius:18px;
      background-image: url('assets/boltlogo.ico');
      background-size:cover;
      background-position:center;
      box-shadow: 0 12px 30px var(--logo-shadow);
      transform-origin:center;
      animation: float 4.5s ease-in-out infinite;
      flex:0 0 auto;
    }
    @keyframes float {
      0% { transform: translateY(0) rotate(-0.8deg); }
      50% { transform: translateY(-8px) rotate(0.9deg); }
      100% { transform: translateY(0) rotate(-0.8deg); }
    }

    /* ---------- title ---------- */
    h1 {
      margin:6px 0 0;
      font-size:var(--fs-h1);
      letter-spacing:0.4px;
      font-weight:800;
      line-height:1.05;
    }
    .subtitle {
      margin:6px 0 0;
      color:var(--muted);
      font-size:var(--fs-sub);
      max-width:820px;
    }
    .description {
      margin-top:8px;
      color:var(--muted);
      font-size:var(--fs-body);
      max-width:760px;
      text-align:center;
      line-height:1.5;
      background: rgba(0,0,0,0.00);
      padding:0 8px;
    }

    /* ---------- actions ---------- */
    .actions { display:flex; gap:12px; align-items:center; justify-content:center; margin-top:8px; }

    .btn {
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:12px 18px;
      border-radius:12px;
      font-weight:700;
      font-size:15px;
      cursor:pointer;
      text-decoration:none;
      border:0;
      transition: transform .12s cubic-bezier(.2,.9,.2,1), box-shadow .12s;
      user-select:none;
      line-height:1;
    }

    .btn-primary {
      background: linear-gradient(180deg,var(--sky), var(--accent));
      color:white;
      box-shadow: 0 8px 26px rgba(30,144,255,0.14);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text);
      border: 1px solid rgba(0,0,0,0.06);
      padding:10px 14px;
      border-radius:10px;
    }

    .btn-primary:hover { transform: translateY(-3px); }
    .btn:active { transform: translateY(1px); }

    /* ---------- modal ---------- */
    .overlay {
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(6,10,14,0.45);
      z-index:1400;
      padding:20px;
    }
    .overlay.show { display:flex; }

    .modal {
      width:100%;
      max-width:520px;
      border-radius:12px;
      background: linear-gradient(180deg,#ffffff,#fbfeff);
      padding:18px;
      box-shadow: var(--shadow-deep);
      border: 1px solid rgba(14,56,88,0.04);
      text-align:left;
    }
    .modal h3 { margin:0 0 6px; font-size:18px; color:var(--text); }
    .modal p { margin:0 0 12px; color:var(--muted); font-size:13px; }

    .asset {
      background: rgba(56,189,248,0.04);
      padding:10px 12px;
      border-radius:8px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
      font-size:13px;
      color:var(--text);
      margin-bottom:14px;
    }

    .modal .controls { display:flex; gap:10px; justify-content:flex-end; align-items:center; }

    /* ---------- small thanks ---------- */
    .thanks {
      display:none;
      padding:22px;
      text-align:center;
      max-width:760px;
    }
    .thanks.show { display:block; }
    .thanks h2 { margin:0 0 8px; font-size:26px; color:var(--text); }
    .thanks p { margin:0; color:var(--muted); }

    /* ---------- footer (center bottom) ---------- */
    .footer {
      margin-top:14px;
      text-align:center;
      font-size:13px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      flex-direction:column;
    }

    .madeby {
      padding:8px 14px;
      border-radius:999px;
      font-weight:800;
      cursor:pointer;
      background: linear-gradient(90deg, var(--red-500), var(--auth-gray));
      color:#fff;
      font-size:13px;
      display:inline-block;
      text-decoration:none;
      box-shadow: 0 8px 22px rgba(255,75,75,0.08);
    }

    .support {
      color:var(--muted);
      font-weight:600;
    }
    .support a { color: inherit; text-decoration: none; border-bottom: 1px dashed rgba(0,0,0,0.06); padding-bottom:2px; }

    /* ---------- theme toggle corner ---------- */
    .corner-controls {
      position:fixed;
      top:16px;
      right:16px;
      display:flex;
      gap:10px;
      z-index:1500;
      align-items:center;
    }

    .theme-toggle, .menu-toggle {
      background: var(--panel);
      border-radius:999px;
      box-shadow: var(--shadow-soft);
      padding:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      width:46px;
      height:46px;
      cursor:pointer;
      border:1px solid var(--panel-border);
    }
    .theme-toggle svg, .menu-toggle svg { width:20px; height:20px; display:block; color:var(--text); }

    /* ---------- slide-in nav ---------- */
    .nav-panel {
      position:fixed;
      top:0;
      right:0;
      height:100vh;
      width:320px;
      max-width:92%;
      transform: translateX(108%);
      transition: transform .24s cubic-bezier(.2,.9,.2,1);
      z-index:1600;
      background: var(--panel);
      border-left: 1px solid var(--panel-border);
      box-shadow: -8px 0 30px rgba(2,8,20,0.08);
      padding:20px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .nav-panel.show { transform: translateX(0); }
    .nav-panel header { display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .nav-panel h4 { margin:0; font-size:16px; font-weight:800; }
    .nav-list { margin-top:8px; display:flex; flex-direction:column; gap:8px; }
    .nav-list a {
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:10px;
      text-decoration:none;
      color:var(--text);
      font-weight:700;
      border:1px solid rgba(0,0,0,0.04);
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.00));
    }

    .nav-list a[aria-current="true"] { box-shadow: 0 8px 26px rgba(30,144,255,0.06); border-color: rgba(30,144,255,0.08); }

    /* ---------- responsive ---------- */
    @media (max-width:720px){
      .card { padding:20px; gap:12px; }
      h1 { font-size:28px; }
      .logo { width:92px; height:92px; border-radius:12px; }
      .madeby { padding:6px 10px; font-size:12px; }
    }

    /* small accessible focus rings */
    .btn:focus, .madeby:focus, .theme-toggle:focus, .menu-toggle:focus, a:focus { outline: 3px solid rgba(30,144,255,0.14); outline-offset: 3px; border-radius:8px; }
  </style>
</head>
<body>
  <!-- top corner controls: menu and theme -->
  <div class="corner-controls" aria-hidden="false">
    <button id="menuToggle" class="menu-toggle" aria-label="Open site menu" title="Open menu" aria-haspopup="true" aria-controls="siteNav">
      <!-- hamburger -->
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M3 7h18"></path>
        <path d="M3 12h18"></path>
        <path d="M3 17h18"></path>
      </svg>
    </button>

    <button id="themeToggle" class="theme-toggle" aria-label="Cycle theme" title="Cycle theme">
      <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
      </svg>
    </button>
  </div>

  <!-- slide-in navigation panel -->
  <nav id="siteNav" class="nav-panel" aria-hidden="true" aria-label="Main navigation" role="navigation">
    <header>
      <h4>Menu</h4>
      <button id="navClose" class="menu-toggle" aria-label="Close menu" title="Close menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M18 6L6 18"></path>
          <path d="M6 6l12 12"></path>
        </svg>
      </button>
    </header>

    <p style="margin:0;color:var(--muted);font-size:14px;">Quick links</p>

    <div class="nav-list" role="list">
      <a id="navHome" href="#mainCard" role="listitem" aria-current="true">Home</a>
      <a id="navDownload" href="#download" role="listitem">Download</a>
    </div>

    <div style="margin-top:auto; font-size:13px; color:var(--muted);">
      <strong>BOLT v1.40</strong><div style="margin-top:6px;">Beta release — official installer available via the Download action.</div>
    </div>
  </nav>

  <main class="container" role="main" aria-labelledby="title">
    <section class="card" id="mainCard" aria-label="Bolt download panel">
      <div class="header-row" style="align-items:center;justify-content:center;">
        <div class="logo" aria-hidden="true"></div>
        <div style="text-align:left;max-width:560px;">
          <h1 id="title">BOLT 1.40</h1>
          <p class="subtitle" id="subtitle">Official installer — fast, secure, and reliable.</p>
        </div>
      </div>

      <p class="description" id="description">
        BOLT is a mid-level programming language created by Ariyan Ahmed, founder of Swifteex Studio. It is engineered to combine speed, expressive power, and simplicity — delivering high performance without unnecessary complexity. BOLT is currently in beta (v1.40). To download the latest installer, open the menu (top-right) and choose <strong>Download</strong>.
      </p>

      <div class="actions" role="group" aria-label="Download actions">
        <button id="openDownload" class="btn btn-primary" aria-haspopup="dialog" aria-controls="downloadModal">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 3v12"></path>
            <path d="M8 11l4 4 4-4"></path>
            <path d="M21 21H3"></path>
          </svg>
          Download installer
        </button>
        <a id="learnMore" class="btn btn-ghost" href="https://github.com/SwifteexStudio/Swifteex/about.html" target="_blank" rel="noopener noreferrer">About BOLT</a>
      </div>

      <div class="footer" aria-hidden="true">
        <a id="madeBy" class="madeby" href="https://swifteexstudio.github.io/Swifteex/" target="_blank" rel="noopener noreferrer">made by Swifteex Studio</a>
        <div class="support">Support: <a href="mailto:swifteexstudio@gmail.com">swifteexstudio@gmail.com</a></div>
      </div>
    </section>

    <!-- Thank you view (hidden) -->
    <div id="thanks" class="thanks" aria-live="polite">
      <h2>Thank you</h2>
      <p class="muted">Your download has started. If you need assistance, email <a href="mailto:swifteexstudio@gmail.com">swifteexstudio@gmail.com</a>.</p>
    </div>
  </main>

  <!-- Modal overlay -->
  <div id="downloadModal" class="overlay" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modalTitle">
    <div class="modal" role="document">
      <h3 id="modalTitle">Start download</h3>
      <p class="muted">Click the button below to begin the official installer. Your browser will handle the download.</p>

      <div class="asset">boltsetupmanager.exe</div>

      <div class="controls" style="margin-top:6px;">
        <button id="cancel" class="btn btn-ghost">Cancel</button>

        <!-- final download: anchor (browser handles download) -->
        <a id="final" class="btn btn-primary"
           href="https://github.com/SwifteexStudio/Swifteex/releases/download/BOLT/boltsetupmanager.exe"
           target="_blank" rel="noopener noreferrer" aria-label="Download installer">
          Download
        </a>
      </div>
    </div>
  </div>

  <script>
    (function(){
      // elements
      const openBtn = document.getElementById('openDownload');
      const overlay = document.getElementById('downloadModal');
      const cancelBtn = document.getElementById('cancel');
      const finalLink = document.getElementById('final');
      const thanks = document.getElementById('thanks');
      const mainCard = document.getElementById('mainCard');
      const FLAG = 'bolt_1_40_started_v3';

      // nav panel elements
      const menuToggle = document.getElementById('menuToggle');
      const nav = document.getElementById('siteNav');
      const navClose = document.getElementById('navClose');
      const navDownload = document.getElementById('navDownload');
      const navHome = document.getElementById('navHome');

      // theme handling: three states -> soft(default) / dark / light
      const htmlEl = document.documentElement;
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = document.getElementById('themeIcon');
      const THEME_KEY = 'ui_theme_three_state_v1';
      const themes = ['soft','dark','light']; // cycle order: soft -> dark -> light -> soft

      function setTheme(name) {
        htmlEl.classList.remove('theme-dark','theme-light');
        if (name === 'dark') htmlEl.classList.add('theme-dark');
        if (name === 'light') htmlEl.classList.add('theme-light');
        // update icon (soft = half-sun, dark = moon, light = sun)
        if (name === 'soft') {
          themeIcon.innerHTML = '<path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path><circle cx="12" cy="12" r="3"></circle>';
        } else if (name === 'dark') {
          themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>';
        } else {
          themeIcon.innerHTML = '<circle cx="12" cy="12" r="4"></circle>';
        }
        try { localStorage.setItem(THEME_KEY, name); } catch(e) {}
      }

      // init theme: prefer saved else prefers-color-scheme else soft
      let saved = null;
      try { saved = localStorage.getItem(THEME_KEY); } catch (e) {}
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (saved && themes.includes(saved)) setTheme(saved);
      else setTheme(prefersDark ? 'dark' : 'soft');

      themeToggle.addEventListener('click', () => {
        // cycle
        const current = (function(){
          if (htmlEl.classList.contains('theme-dark')) return 'dark';
          if (htmlEl.classList.contains('theme-light')) return 'light';
          return 'soft';
        })();
        const idx = themes.indexOf(current);
        const next = themes[(idx + 1) % themes.length];
        setTheme(next);
      });

      // open modal
      openBtn.addEventListener('click', () => {
        openModal();
      });

      // cancel modal
      cancelBtn.addEventListener('click', () => {
        closeModal();
        openBtn.focus();
      });

      // final download clicked: mark flag, close modal, show thanks
      finalLink.addEventListener('click', () => {
        try { localStorage.setItem(FLAG, Date.now().toString()); } catch(e) {}
        closeModal();
        setTimeout(() => {
          try { mainCard.style.display = 'none'; thanks.classList.add('show'); } catch(e) {}
        }, 600);
      });

      // on load, if flag present show thanks (handles reloads)
      window.addEventListener('DOMContentLoaded', () => {
        try {
          if (localStorage.getItem(FLAG)) {
            localStorage.removeItem(FLAG);
            mainCard.style.display = 'none';
            thanks.classList.add('show');
          }
        } catch(e) {}
      });

      // close modal on ESC
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          if (overlay.classList.contains('show')) {
            closeModal();
            openBtn.focus();
          }
          if (nav.classList.contains('show')) {
            closeNav();
            menuToggle.focus();
          }
        }
      });

      // click outside to close modal
      overlay.addEventListener('click', (ev) => {
        if (ev.target === overlay) {
          closeModal();
        }
      });

      // modal helpers
      function openModal() {
        overlay.classList.add('show');
        overlay.setAttribute('aria-hidden','false');
        // focus first focusable element in modal
        finalLink.focus();
      }
      function closeModal() {
        overlay.classList.remove('show');
        overlay.setAttribute('aria-hidden','true');
      }

      // NAV: open / close / actions
      menuToggle.addEventListener('click', () => {
        openNav();
      });
      navClose.addEventListener('click', () => {
        closeNav();
        menuToggle.focus();
      });

      function openNav() {
        nav.classList.add('show');
        nav.setAttribute('aria-hidden', 'false');
        // mark visible link states
        navHome.setAttribute('aria-current', 'true');
        // focus first link
        navHome.focus();
      }
      function closeNav() {
        nav.classList.remove('show');
        nav.setAttribute('aria-hidden', 'true');
      }

      // when nav download clicked, open modal and close nav
      navDownload.addEventListener('click', (ev) => {
        ev.preventDefault();
        closeNav();
        openModal();
      });

      // HOME: close nav and scroll to main card
      navHome.addEventListener('click', (ev) => {
        ev.preventDefault();
        closeNav();
        document.getElementById('mainCard').scrollIntoView({ behavior: 'smooth', block: 'center' });
      });

      // Accessibility: close nav on outside click
      document.addEventListener('click', (e) => {
        if (!nav.contains(e.target) && !menuToggle.contains(e.target) && nav.classList.contains('show')) {
          closeNav();
        }
      });

      // Cheap focus trap inside modal (basic): trap Tab inside modal while open
      document.addEventListener('focusin', (e) => {
        if (overlay.classList.contains('show')) {
          const modal = overlay.querySelector('.modal');
          if (modal && !modal.contains(e.target)) {
            // move focus back to download button if clicking outside
            finalLink.focus();
          }
        }
      });

      // ensure links with #download behavior trigger the modal if referenced via hash
      if (location.hash === '#download') {
        openModal();
      }
    })();
  </script>
</body>
</html>
